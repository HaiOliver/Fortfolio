function init(){var e=new THREERoot({createCameraControls:!1,antialias:1===window.devicePixelRatio,fov:70});e.renderer.setClearColor(0,0),e.renderer.setPixelRatio(window.devicePixelRatio||1),e.camera.position.set(0,0,70);var t=new Slide(90,50,"out"),r=new THREE.ImageLoader;r.setCrossOrigin("Anonymous"),r.load("./oli6.jpg",function(e){t.setImage(e)}),e.scene.add(t);var a=new Slide(90,50,"in"),i=new THREE.ImageLoader;i.setCrossOrigin("Anonymous"),i.load("./photoOliver-min.png",function(e){a.setImage(e)}),e.scene.add(a);var n=new TimelineMax({repeat:-1,repeatDelay:1,yoyo:!0});n.add(t.transition(),0),n.add(a.transition(),0),createTweenScrubber(n),window.addEventListener("keyup",function(e){80===e.keyCode&&n.paused(!n.paused())})}function Slide(e,t,r){var a=new THREE.PlaneGeometry(e,t,2*e,2*t);THREE.BAS.Utils.separateFaces(a);var i=new SlideGeometry(a);i.bufferUVs();var n,o,s,d,c,u=i.createAttribute("aAnimation",2),l=i.createAttribute("aStartPosition",3),h=i.createAttribute("aControl0",3),m=i.createAttribute("aControl1",3),E=i.createAttribute("aEndPosition",3);this.totalDuration=2.335;var y=new THREE.Vector3,f=new THREE.Vector3,p=new THREE.Vector3,w=new THREE.Vector3,v=new THREE.Vector3;function T(e){var t=Math.sign(e.y);return v.x=50*THREE.Math.randFloat(.1,.3),v.y=t*THREE.Math.randFloat(.1,.3)*70,v.z=THREE.Math.randFloatSpread(20),v}function R(e){var t=Math.sign(e.y);return v.x=50*THREE.Math.randFloat(.3,.6),v.y=-t*THREE.Math.randFloat(.3,.6)*70,v.z=THREE.Math.randFloatSpread(20),v}for(n=0,o=0,s=0,d=0;n<i.faceCount;n++,o+=6,s+=9,d+=12){var H,M=a.faces[n],S=THREE.BAS.Utils.computeCentroid(a,M),b=THREE.Math.randFloat(.8,1.2),x=THREE.Math.mapLinear(S.x,.5*-e,.5*e,0,.9);for(H="in"===r?THREE.Math.mapLinear(Math.abs(S.y),0,.5*t,0,.125):THREE.Math.mapLinear(Math.abs(S.y),0,.5*t,.125,0),c=0;c<6;c+=2)u.array[o+c]=x+H+.11*Math.random()*b,u.array[o+c+1]=b;for(w.copy(S),y.copy(S),"in"===r?(f.copy(S).sub(T(S)),p.copy(S).sub(R(S))):(f.copy(S).add(T(S)),p.copy(S).add(R(S))),c=0;c<9;c+=3)l.array[s+c]=y.x,l.array[s+c+1]=y.y,l.array[s+c+2]=y.z,h.array[s+c]=f.x,h.array[s+c+1]=f.y,h.array[s+c+2]=f.z,m.array[s+c]=p.x,m.array[s+c+1]=p.y,m.array[s+c+2]=p.z,E.array[s+c]=w.x,E.array[s+c+1]=w.y,E.array[s+c+2]=w.z}var z=new THREE.BAS.BasicAnimationMaterial({shading:THREE.FlatShading,side:THREE.DoubleSide,uniforms:{uTime:{type:"f",value:0}},shaderFunctions:[THREE.BAS.ShaderChunk.cubic_bezier,THREE.BAS.ShaderChunk.ease_in_out_cubic,THREE.BAS.ShaderChunk.quaternion_rotation],shaderParameters:["uniform float uTime;","attribute vec2 aAnimation;","attribute vec3 aStartPosition;","attribute vec3 aControl0;","attribute vec3 aControl1;","attribute vec3 aEndPosition;"],shaderVertexInit:["float tDelay = aAnimation.x;","float tDuration = aAnimation.y;","float tTime = clamp(uTime - tDelay, 0.0, tDuration);","float tProgress = ease(tTime, 0.0, 1.0, tDuration);"],shaderTransformPosition:["in"===r?"transformed *= tProgress;":"transformed *= 1.0 - tProgress;","transformed += cubicBezier(aStartPosition, aControl0, aControl1, aEndPosition, tProgress);"]},{map:new THREE.Texture});THREE.Mesh.call(this,i,z),this.frustumCulled=!1}function SlideGeometry(e){THREE.BAS.ModelBufferGeometry.call(this,e)}function THREERoot(e){e=utils.extend({fov:60,zNear:10,zFar:1e5,createCameraControls:!0},e),this.renderer=new THREE.WebGLRenderer({antialias:e.antialias,alpha:!0}),this.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio||1)),document.getElementById("three-container").appendChild(this.renderer.domElement),this.camera=new THREE.PerspectiveCamera(e.fov,window.innerWidth/window.innerHeight,e.zNear,e.zfar),this.scene=new THREE.Scene,e.createCameraControls&&(this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement)),this.resize=this.resize.bind(this),this.tick=this.tick.bind(this),this.resize(),this.tick(),window.addEventListener("resize",this.resize,!1)}window.onload=init,console.ward=function(){},Slide.prototype=Object.create(THREE.Mesh.prototype),Slide.prototype.constructor=Slide,Object.defineProperty(Slide.prototype,"time",{get:function(){return this.material.uniforms.uTime.value},set:function(e){this.material.uniforms.uTime.value=e}}),Slide.prototype.setImage=function(e){this.material.uniforms.map.value.image=e,this.material.uniforms.map.value.needsUpdate=!0},Slide.prototype.transition=function(){return TweenMax.fromTo(this,3,{time:0},{time:this.totalDuration})},SlideGeometry.prototype=Object.create(THREE.BAS.ModelBufferGeometry.prototype),SlideGeometry.prototype.constructor=SlideGeometry,SlideGeometry.prototype.bufferPositions=function(){for(var e=this.createAttribute("position",3).array,t=0;t<this.faceCount;t++){var r=this.modelGeometry.faces[t],a=THREE.BAS.Utils.computeCentroid(this.modelGeometry,r),i=this.modelGeometry.vertices[r.a],n=this.modelGeometry.vertices[r.b],o=this.modelGeometry.vertices[r.c];e[3*r.a]=i.x-a.x,e[3*r.a+1]=i.y-a.y,e[3*r.a+2]=i.z-a.z,e[3*r.b]=n.x-a.x,e[3*r.b+1]=n.y-a.y,e[3*r.b+2]=n.z-a.z,e[3*r.c]=o.x-a.x,e[3*r.c+1]=o.y-a.y,e[3*r.c+2]=o.z-a.z}},THREERoot.prototype={tick:function(){this.update(),this.render(),requestAnimationFrame(this.tick)},update:function(){this.controls&&this.controls.update()},render:function(){this.renderer.render(this.scene,this.camera)},resize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}};var utils={extend:function(e,t){for(var r in t)e[r]=t[r];return e},randSign:function(){return Math.random()>.5?1:-1},ease:function(e,t,r,a,i){return r+e.getRatio(t/i)*a},fibSpherePoint:function(){var e={x:0,y:0,z:0},t=Math.PI*(3-Math.sqrt(5));return function(r,a,i){var n,o,s=2/a;return e.y=r*s-1+.5*s,n=Math.sqrt(1-e.y*e.y),o=r*t,e.x=Math.cos(o)*n,e.z=Math.sin(o)*n,i=i||1,e.x*=i,e.y*=i,e.z*=i,e}}(),spherePoint:function(e,t){void 0===e&&(e=Math.random()),void 0===t&&(t=Math.random());var r=2*Math.PI*e,a=Math.acos(2*t-1),i={};return i.x=Math.sin(a)*Math.cos(r),i.y=Math.sin(a)*Math.sin(r),i.z=Math.cos(a),i}};function createTweenScrubber(e,t){function r(){TweenMax.to(e,1,{timeScale:0})}function a(){TweenMax.to(e,1,{timeScale:1})}function i(r){var a=e.progress(),i=THREE.Math.clamp(a+r*t,0,1);e.progress(i)}t=t||.001;var n=0,o=!1;document.body.style.cursor="pointer",window.addEventListener("mousedown",function(e){o=!0,document.body.style.cursor="ew-resize",n=e.clientX,r()}),window.addEventListener("mouseup",function(e){o=!1,document.body.style.cursor="pointer",a()}),window.addEventListener("mousemove",function(e){if(!0===o){var t=e.clientX,r=t-n;n=t,i(r)}}),window.addEventListener("touchstart",function(e){n=e.touches[0].clientX,r(),e.preventDefault()}),window.addEventListener("touchend",function(e){a(),e.preventDefault()}),window.addEventListener("touchmove",function(e){var t=e.touches[0].clientX,r=t-n;n=t,i(r),e.preventDefault()})}